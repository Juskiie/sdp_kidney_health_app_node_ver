<!-- eslint-disable import/no-unresolved -->
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Kidney health app home page</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="styles/globalStyle.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> // chart.js
    <style>
        canvas {
            -moz-user-select: none;
            -webkit-user-select: none;
            -ms-user-select: none;
        }
    </style>

</head>
<body>
<script>
    document.write("<h1>Welcome to KodeGreen's Kidney Health Tracker</h1>");
</script>
<nav>
    <ul>
        <li><button id="dashboard">Dashboard</button></li>
        <li><button>New Calculation</button></li>
        <li><button id="update-chart-button">Past Results</button></li>
        <li><button>Clinician Feedback</button></li>
        <li style="float:right"><a href="#">Logout</a></li>
    </ul>
    <script>
	    const updateChartButton = document.getElementById('update-chart-button');

	    // Add a click event listener to the button
	    updateChartButton.addEventListener('click', function()
        {
	        const data = {
		        labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July'],
		        datasets: [
			        {
				        label: 'My First Dataset',
				        data: [65, 59, 80, 81, 56, 55, 40],
				        fill: false,
				        borderColor: 'rgb(75, 192, 192)',
				        tension: 0.1
			        }
		        ]
	        };
	        const ctx = document.getElementById('line-chart').getContext('2d'); // use correct id "line-chart"
	        const options = {
		        scales: {
			        yAxes: [{
				        ticks: {
					        beginAtZero: true
				        }
			        }]
		        }
	        }; // your options object
	        chart = new Chart(ctx, {
		        type: 'line',
		        data: data,
		        options: options
	        });
	    });
    </script>
    <script id="get-and-update-chart">
	    const dashBoardButton = document.getElementById('dashboard');
		dashBoardButton.addEventListener('click', function() {
			let patientID=1;    // Change these values to values from patientID
			let results= {  // Change these values to values from the form
				"2023-01-01": 1,
				"2023-01-02": 2,
				"2023-01-03": 3
			};

			let data = {
				ID:patientID,
				data:results
			}; // This should contain, the user's info, and their results

			fetch('/update', {
				method: 'POST',
				headers: {
					'Content-Type': 'application/json'
				},
				body: JSON.stringify(data)
			})
				.then(res => res.json())
				.then(data => {
					// handle the response data here
					console.log(data);
				})
				.catch(error => {
					// handle errors here
					console.error(error);
				})
        });
    </script>
</nav>
<div class="chartStyle" style="width:50%">
    <canvas id="line-chart"></canvas>
</div>
</body>
</html>

