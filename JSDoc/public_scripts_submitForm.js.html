<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: public/scripts/submitForm.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: public/scripts/submitForm.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import calcEFGR from './calcEFGR.js';
console.log("submitForm.js loaded");

/**
 * Processes information sent from the eGFR calculator form and updates the HTML.
 * @author L. Casey Bull - K2028885@kingston.ac.uk
 * @param event - This is the form details when the submit button is clicked.
 * @returns {boolean} - Returns false, unless there's an error
 */
function submitForm(event) {
	try{
		event.preventDefault();     // Prevent page reloading needlessly
		let sex = document.querySelector('select[name="sex"]').value;
		let age = document.querySelector('input[name="age"]').value;
		let ethnicity = document.querySelector('select[name="ethnicity"]').value;
		let creatinine = document.querySelector('input[name="creat"]').value;
		let isFemale = sex==="female";
		let isBlack = ethnicity==="black";
		let isMmol = document.getElementById("mmol").checked;
		const efgrResult = calcEFGR(creatinine, age, isFemale, isBlack, isMmol);    // Use eGFR calculator script to get value for patient
		document.querySelector('.result').textContent = efgrResult;

		// Simple logging for debugging purposes; can be removed.
		console.log("Sex:", sex);
		console.log("Age:", age);
		console.log("Ethnicity:", ethnicity);
		console.log("Creatinine:", creatinine);
		console.log(efgrResult);
		alert("Your EFGR value is: "+efgrResult);

		// let resultMessageElement = document.querySelector('#result-message');
		const rightBoxElement = document.querySelector('.results');

		// generalising the unit before rendering UI
       const independentresult = isMmol ? efgrResult : efgrResult * 18;

		// Determines background colour based on eGFR value
		// document.getElementById("resultMessage").style.visibility = "visible";
		switch(true) {
			case efgrResult >= 90:
				rightBoxElement.style.backgroundColor = '#C9CC3F';
				document.getElementById("resultMessage").innerText = 'This is considered normal.';
				break;
			case efgrResult >= 60 &amp;&amp; efgrResult &lt;= 89:
				rightBoxElement.style.backgroundColor = '#E7DFC9';
				document.getElementById("resultMessage").innerText = 'This is considered mildly low.';
				break;
			case efgrResult >= 45 &amp;&amp; efgrResult &lt;= 59:
				rightBoxElement.style.backgroundColor = '#E8D5CE';
				document.getElementById("resultMessage").innerText = 'This is considered moderately low.';
				break;
			case efgrResult >= 30 &amp;&amp; efgrResult &lt;= 44:
				rightBoxElement.style.backgroundColor = '#E8CDD2';
				document.getElementById("resultMessage").innerText = 'This is considered severely low.';
				break;
			case efgrResult >= 15 &amp;&amp; efgrResult &lt;= 29:
				rightBoxElement.style.backgroundColor = '#D4C3CA';
				document.getElementById("resultMessage").innerText = 'This is considered very severely low.';
				break;
			default:
				rightBoxElement.style.backgroundColor = '#D4C3CA';
				document.getElementById("resultMessage").innerText = 'Your eGFR result is extremely low. Please see your doctor immediately.';
				break;
		}

		return false;
	} catch (e) {
		console.error(e);
	} finally {
		return false;
	}
}

document.querySelector('#testForm').addEventListener('submit', submitForm);
export default { submitForm };</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#addUsers">addUsers</a></li><li><a href="global.html#appendResult">appendResult</a></li><li><a href="global.html#createTableRow">createTableRow</a></li><li><a href="global.html#csvLoader">csvLoader</a></li><li><a href="global.html#pool">pool</a></li><li><a href="global.html#submitForm">submitForm</a></li><li><a href="global.html#updateResultsData">updateResultsData</a></li><li><a href="global.html#updateWelcomeMessage">updateWelcomeMessage</a></li><li><a href="global.html#verifyRecaptcha">verifyRecaptcha</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Thu Mar 30 2023 17:23:18 GMT+0100 (British Summer Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
